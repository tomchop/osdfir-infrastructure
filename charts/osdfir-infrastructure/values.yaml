## OSDFIR Infrastructure Helm Chart
## Please use this Helm chart for deploying Open Source Digital Forensics Tools
## to a Kubernetes environment.
## The following tools are supported in this deployment:
## - Timesketch; ref https://github.com/google/timesketch
## - Turbinia; ref https://github.com/google/turbinia
##
## @section Global parameters
## Please, note that this will override the parameters configured to use the global value
##
global:
  ## Global Persistence Configuration
  ##
  ## @param global.existingPVC Existing claim for the OSDFIR Infrastructure persistent volume (overrides `timesketch.persistent.name` and `turbinia.persistent.name`)
  ##
  existingPVC: ""
  ## @param global.storageClass StorageClass for the OSDFIR Infrastructure persistent volume (overrides `timesketch.persistent.storageClass` and `turbinia.persistent.storageClass`)
  ##
  storageClass: ""
## @section OSDFIR Infrastructure persistence storage parameters
##
persistence:
  ## @param persistence.enabled Enables persistent volume storage for OSDFIR Infrastructure
  ##
  enabled: true
  ## @param persistence.name OSDFIR Infrastructure persistent volume name
  ##
  name: osdfirvolume
  ## @param persistence.size OSDFIR Infrastructure persistent volume size
  ##
  size: 2Gi
  ## @param persistence.storageClass PVC Storage Class for OSDFIR Infrastructure volume
  ## If set to "-", storageClassName: "", which disables dynamic provisioning
  ## If undefined or set to null, no storageClassName spec is
  ##   set, choosing the default provisioner.  (gp2 on AWS, standard on
  ##   GKE, AWS & OpenStack)
  ## ref https://kubernetes.io/docs/concepts/storage/dynamic-provisioning/#using-dynamic-provisioning
  ##
  storageClass: ""
  ## @param persistence.accessModes PVC Access Mode for the OSDFIR Infrastructure volume
  ## Access mode may need to be updated based on the StorageClass
  ## ref https://kubernetes.io/docs/concepts/storage/persistent-volumes/#access-modes
  ##
  accessModes:
    - ReadWriteOnce
## @section Timesketch Configuration
## The following section covers configuration parameters for Timesketch
## To see a full list of available values, run helm show values charts/timesketch*
##
timesketch:
  ## @param timesketch.enabled Enables the Timesketch deployment
  ##
  enabled: true
  ## @section Timesketch image configuration
  ##
  image:
    ## @param timesketch.image.repository Timesketch image repository
    ##
    repository: us-docker.pkg.dev/osdfir-registry/timesketch/timesketch
    ## @param timesketch.image.pullPolicy Timesketch image pull policy
    ## ref https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy
    ##
    pullPolicy: IfNotPresent
    ## @param timesketch.image.tag Overrides the image tag whose default is the chart appVersion
    ##
    tag: latest
    ## @param timesketch.image.imagePullSecrets Specify secrets if pulling from a private repository
    ## ref https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
    ## e.g.
    ## imagePullSecrets:
    ##   - myRegistryKeySecretName
    ##
    imagePullSecrets: []
  ## @section Timesketch Configuration Parameters
  ## ref: https://github.com/google/timesketch/blob/master/data/timesketch.conf
  ##
  config:
    ## @param timesketch.config.override Overrides the default Timesketch configs to instead use a user specified directory if present on the root directory of the Helm chart
    ## to retrieve the config files from. Please ensure the appropriate configs are in the directory else Timesketch
    ## may not run properly. To see which config files are required, review the tools/download-timesketch-configs.sh
    ## script packaged along with this Helm chart.
    ##
    override: configs/*
    ## @param timesketch.config.createUser Creates a default Timesketch user that can be used to login to Timesketch after deployment
    ##
    createUser: true
  ## @section Timesketch Frontend Configuration
  ##
  frontend:
    ## @param timesketch.frontend.podSecurityContext Holds pod-level security attributes and common frontend container settings
    ## Some fields are also present in container.securityContext. Field values of container.securityContext take precedence over field values of PodSecurityContext
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#podsecuritycontext-v1-core
    ## e.g.
    ## fsgroup: 2000
    ##
    podSecurityContext: {}
    ## @param timesketch.frontend.securityContext Holds security configuration that will be applied to the frontend container
    ## Some fields are present in both SecurityContext and PodSecurityContext. When both are set, the values in SecurityContext take precedence
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#securitycontext-v1-core
    ## e.g.
    ## capabilities
    ##   drop:
    ##   - ALL
    ## readOnlyRootFilesystem: true
    ## runAsNonRoot: true
    ## runAsUser: 1000
    ##
    securityContext: {}
    ## Timesketch Frontend resource requests and limits
    ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
    ## We leave the default resources as a choice for the user in order to increase
    ## the chances charts run on environments with little resources, such as Minikube.
    ## If you want to specify resources, uncomment the following lines, adjust them as
    ## necessary, and remove the curly braces after 'resources:'.
    ## @param timesketch.frontend.resources.limits The resources limits for the frontend container
    ## @param timesketch.frontend.resources.requests The requested resources for the frontend container
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      ## Example:
      ## requests:
      ##    cpu: 500m
      ##    memory: 1Gi
      requests: {}
    ## @param timesketch.frontend.nodeSelector Node labels for Timesketch frontend pods assignment
    ## ref: https://kubernetes.io/docs/user-guide/node-selection/
    ##
    nodeSelector: {}
    ## @param timesketch.frontend.tolerations Tolerations for Timesketch frontend pods assignment
    ## ref https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
    ##
    tolerations: []
    ## @param timesketch.frontend.affinity Affinity for Timesketch frontend pods assignment
    ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
    ##
    affinity: {}
  ## @section Timesketch Worker Configuration
  ##
  worker:
    ## @param timesketch.worker.podSecurityContext Holds pod-level security attributes and common worker container settings
    ## Some fields are also present in container.securityContext. Field values of container.securityContext take precedence over field values of PodSecurityContext
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#podsecuritycontext-v1-core
    ## e.g.
    ## fsgroup: 2000
    ##
    podSecurityContext: {}
    ## @param timesketch.worker.securityContext Holds security configuration that will be applied to the worker container
    ## Some fields are present in both SecurityContext and PodSecurityContext. When both are set, the values in SecurityContext take precedence
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#securitycontext-v1-core
    ## e.g.
    ## capabilities
    ##   drop:
    ##   - ALL
    ## readOnlyRootFilesystem: true
    ## runAsNonRoot: true
    ## runAsUser: 1000
    ##
    securityContext: {}
    ## Timesketch Worker resource requests and limits
    ## @param timesketch.worker.resources.limits The resources limits for the worker container
    ## @param timesketch.worker.resources.requests.cpu The requested cpu for the worker container
    ## @param timesketch.worker.resources.requests.memory The requested memory for the worker container
    ##
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      requests:
        cpu: 250m
        memory: 256Mi
    ## @param timesketch.worker.nodeSelector Node labels for Timesketch worker pods assignment
    ## ref: https://kubernetes.io/docs/user-guide/node-selection/
    ##
    nodeSelector: {}
    ## @param timesketch.worker.tolerations Tolerations for Timesketch worker pods assignment
    ## ref https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
    ##
    tolerations: []
    ## @param timesketch.worker.affinity Affinity for Timesketch worker pods assignment
    ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
    ##
    affinity: {}
  ## Service Parameters
  ##
  service:
    ## @param timesketch.service.type Timesketch service type
    ##
    type: ClusterIP
    ## @param timesketch.service.port Timesketch service port
    ##
    port: 5000
  ## Metrics Parameters
  ## IMPORTANT: Timesketch utilizes Prometheus to scrape metrics through annotations
  ## Please ensure the Prometheus server is also installed to the cluster for metrics to scrape properly
  ##
  metrics:
    ## @param timesketch.metrics.enabled Enables metrics scraping
    ##
    enabled: true
    ## @param timesketch.metrics.port Port to scrape metrics from
    ##
    port: 9200
  ## Ingress Parameters
  ##
  ingress:
    ## @param ingress.enabled Enable the Timesketch loadbalancer for external access
    ##
    enabled: false
    ## @param ingress.host Domain name Timesketch will be hosted under
    ## Please ensure this value is set when enabling Ingress. If using "gce" for
    ## ingress.className, please ensure you have a DNS record set for the IP address
    ## registered under ingress.gcp.staticIPName
    ##
    host: ""
    ## @param ingress.className IngressClass that will be be used to implement the Ingress
    ## ref https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/
    ##
    className: "gce"
    ## GCP ingress configuration
    ##
    gcp:
      ## @param ingress.gcp.managedCertificates Enables GCP managed certificates for your domain
      ## ref https://cloud.google.com/load-balancing/docs/ssl-certificates/google-managed-certs
      ##
      managedCertificates: false
      ## @param ingress.gcp.staticIPName Name of the static IP address you reserved in GCP. Required when using "gce" in ingress.className
      ## ref https://cloud.google.com/compute/docs/ip-addresses/reserve-static-external-ip-address
      ##
      staticIPName: ""
      ## @param ingress.gcp.staticIPV6Name Name of the static IPV6 address you reserved in GCP. This can be optionally provided to deploy a loadbalancer with an IPV6 address
      ## ref https://cloud.google.com/compute/docs/ip-addresses/reserve-static-external-ip-address
      ##
      staticIPV6Name: ""
## @section Turbinia Configuration
## The following section covers configuration parameters for Turbinia
## To see a full list of available values, run helm show values charts/turbinia*
##
turbinia:
  ## @param turbinia.enabled Enables the Turbinia deployment
  ##
  enabled: true
  ## @section Turbinia server configuration
  ##
  server:
    image:
      ## @param turbinia.server.image.repository Turbinia image repository
      ##
      repository: us-docker.pkg.dev/osdfir-registry/turbinia/release/turbinia-server
      ## @param turbinia.server.image.pullPolicy Turbinia image pull policy
      ## ref https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy
      ##
      pullPolicy: IfNotPresent
      ## @param turbinia.server.image.tag Overrides the image tag whose default is the chart appVersion
      ##
      tag: latest
      ## @param turbinia.server.image.imagePullSecrets Specify secrets if pulling from a private repository
      ## ref https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
      ## e.g.
      ## imagePullSecrets:
      ##   - myRegistryKeySecretName
      ##
      imagePullSecrets: []
    ## @param turbinia.server.podSecurityContext Holds pod-level security attributes and common server container settings
    ## Some fields are also present in container.securityContext. Field values of container.securityContext take precedence over field values of PodSecurityContext
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#podsecuritycontext-v1-core
    ## e.g.
    ## fsgroup: 2000
    ##
    podSecurityContext: {}
    ## @param turbinia.server.securityContext Holds security configuration that will be applied to the server container
    ## Some fields are present in both SecurityContext and PodSecurityContext. When both are set, the values in SecurityContext take precedence
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#securitycontext-v1-core
    ## e.g.
    ## capabilities
    ##   drop:
    ##   - ALL
    ## readOnlyRootFilesystem: true
    ## runAsNonRoot: true
    ## runAsUser: 1000
    ##
    securityContext: {}
    ## Turbinia Server resource requests and limits
    ## ref: https://kubernetes.io/docs/user-guide/compute-resources/
    ## We leave the default resources as a choice for the user in order to increase
    ## the chances charts run on environments with little resources, such as Minikube.
    ## If you want to specify resources, uncomment the following lines, adjust them as
    ## necessary, and remove the curly braces after 'resources:'.
    ## @param turbinia.server.resources.limits Resource limits for the server container
    ## @param turbinia.server.resources.requests Requested resources for the server container
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      ## Example:
      ## requests:
      ##    cpu: 500m
      ##    memory: 1Gi
      requests: {}
    ## @param turbinia.server.nodeSelector Node labels for Turbinia server pods assignment
    ## ref: https://kubernetes.io/docs/user-guide/node-selection/
    ##
    nodeSelector: {}
    ## @param turbinia.server.tolerations Tolerations for Turbinia server pods assignment
    ## ref https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
    ##
    tolerations: []
    ## @param turbinia.server.affinity Affinity for Turbinia server pods assignment
    ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
    ##
    affinity: {}
  ## @section Turbinia worker configuration
  ##
  worker:
    image:
      ## @param turbinia.worker.image.repository Turbinia image repository
      ##
      repository: us-docker.pkg.dev/osdfir-registry/turbinia/release/turbinia-worker
      ## @param turbinia.worker.image.pullPolicy Turbinia image pull policy
      ## ref https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy
      ##
      pullPolicy: IfNotPresent
      ## @param turbinia.worker.image.tag Overrides the image tag whose default is the chart appVersion
      ##
      tag: latest
      ## @param turbinia.worker.image.imagePullSecrets Specify secrets if pulling from a private repository
      ## ref https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
      ## e.g.
      ## imagePullSecrets:
      ##   - myRegistryKeySecretName
      ##
      imagePullSecrets: []
    ## @param turbinia.worker.replicaCount Number of worker pods to run at once
    ## Disabled if the value worker.autoscaling.enabled is enabled.
    replicaCount: 1
    ## Worker autoscaler configuration
    ## ref https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/
    ##
    autoscaling:
      ## @param turbinia.worker.autoscaling.enabled Enables Turbinia Worker autoscaling
      ##
      enabled: false
      ## @param turbinia.worker.autoscaling.minReplicas Minimum amount of worker pods to run at once
      ##
      minReplicas: 5
      ## @param turbinia.worker.autoscaling.maxReplicas Maximum amount of worker pods to run at once
      ##
      maxReplicas: 500
      ## @param turbinia.worker.autoscaling.targetCPUUtilizationPercentage CPU scaling metric workers will scale based on
      ##
      targetCPUUtilizationPercentage: 80
    ## @param turbinia.worker.podSecurityContext Holds pod-level security attributes and common worker container settings
    ## Some fields are also present in container.securityContext. Field values of container.securityContext take precedence over field values of PodSecurityContext
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#podsecuritycontext-v1-core
    ## e.g.
    ## fsgroup: 2000
    ##
    podSecurityContext: {}
    ## Worker Security Context Configuration
    ## Some fields are present in both SecurityContext and PodSecurityContext. When both are set, the values in SecurityContext take precedence
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#securitycontext-v1-core
    ##
    securityContext:
      ## @param turbinia.worker.securityContext.privileged Runs the container as priveleged. Due to Turbinia attaching and detaching disks, a priveleged container is required for the worker container.
      ##
      privileged: true
    ## Turbinia Worker resource requests and limits
    ## @param turbinia.worker.resources.limits Resources limits for the worker container
    ## @param turbinia.worker.resources.requests.cpu Requested cpu for the worker container
    ## @param turbinia.worker.resources.requests.memory Requested memory for the worker container
    ##
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      requests:
        cpu: 250m
        memory: 256Mi
    ## @param turbinia.worker.nodeSelector Node labels for Turbinia worker pods assignment
    ## ref: https://kubernetes.io/docs/user-guide/node-selection/
    ##
    nodeSelector: {}
    ## @param turbinia.worker.tolerations Tolerations for Turbinia worker pods assignment
    ## ref https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
    ##
    tolerations: []
    ## @param turbinia.worker.affinity Affinity for Turbinia worker pods assignment
    ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
    ##
    affinity: {}
  ## @section Turbinia API / Web configuration
  ##
  api:
    image:
      ## @param turbinia.api.image.repository Turbinia image repository for API / Web server
      ##
      repository: us-docker.pkg.dev/osdfir-registry/turbinia/release/turbinia-api-server
      ## @param turbinia.api.image.pullPolicy Turbinia image pull policy
      ## ref https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy
      ##
      pullPolicy: IfNotPresent
      ## @param turbinia.api.image.tag Overrides the image tag whose default is the chart appVersion
      ##
      tag: latest
      ## @param turbinia.api.image.imagePullSecrets Specify secrets if pulling from a private repository
      ## ref https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
      ## e.g.
      ## imagePullSecrets:
      ##   - myRegistryKeySecretName
      ##
      imagePullSecrets: []
    ## @param turbinia.api.podSecurityContext Holds pod-level security attributes that will be applied to the API / Web container
    ## Some fields are also present in container.securityContext. Field values of container.securityContext take precedence over field values of PodSecurityContext
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#podsecuritycontext-v1-core
    ## e.g.
    ## fsgroup: 2000
    ##
    podSecurityContext: {}
    ## @param turbinia.api.securityContext Holds security configuration that will be applied to the API / Web container
    ## Some fields are present in both SecurityContext and PodSecurityContext. When both are set, the values in SecurityContext take precedence
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#securitycontext-v1-core
    ## e.g.
    ## capabilities
    ##   drop:
    ##   - ALL
    ## readOnlyRootFilesystem: true
    ## runAsNonRoot: true
    ## runAsUser: 1000
    ##
    securityContext: {}
    ## Turbinia API / Web resource requests and limits
    ## @param api.resources.limits Resource limits for the api container
    ## @param api.resources.requests Requested resources for the api container
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      ## Example:
      ## requests:
      ##    cpu: 500m
      ##    memory: 1Gi
      requests: {}
    ## @param turbinia.api.nodeSelector Node labels for Turbinia api pods assignment
    ## ref: https://kubernetes.io/docs/user-guide/node-selection/
    ##
    nodeSelector: {}
    ## @param turbinia.api.tolerations Tolerations for Turbinia api pods assignment
    ## ref https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
    ##
    tolerations: []
    ## @param turbinia.api.affinity Affinity for Turbinia api pods assignment
    ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
    ##
    affinity: {}
  ## @section Turbinia controller configuration
  ## The controller is not required to use Turbinia and serves as an extra
  ## container that can be used for troubleshooting
  ##
  controller:
    ## @param turbinia.controller.enabled If enabled, deploys the Turbinia controller
    ##
    enabled: false
    image:
      ## @param turbinia.controller.image.repository Turbinia image repository for the Turbinia controller
      ##
      repository: us-docker.pkg.dev/osdfir-registry/turbinia/release/turbinia-controller
      ## @param controller.image.pullPolicy Turbinia image pull policy
      ## ref https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy
      ##
      pullPolicy: IfNotPresent
      ## @param turbinia.controller.image.tag Overrides the image tag whose default is the chart appVersion
      ##
      tag: latest
      ## @param turbinia.controller.image.imagePullSecrets Specify secrets if pulling from a private repository
      ## ref https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/
      ## e.g.
      ## imagePullSecrets:
      ##   - myRegistryKeySecretName
      ##
      imagePullSecrets: []
    ## @param turbinia.controller.podSecurityContext Holds pod-level security attributes and common API / Web container settings
    ## Some fields are also present in container.securityContext. Field values of container.securityContext take precedence over field values of PodSecurityContext
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#podsecuritycontext-v1-core
    ## e.g.
    ## fsgroup: 2000
    ##
    podSecurityContext: {}
    ## @param turbinia.controller.securityContext Holds security configuration that will be applied to the API / Web container
    ## Some fields are present in both SecurityContext and PodSecurityContext. When both are set, the values in SecurityContext take precedence
    ## ref https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.27/#securitycontext-v1-core
    ## e.g.
    ## capabilities
    ##   drop:
    ##   - ALL
    ## readOnlyRootFilesystem: true
    ## runAsNonRoot: true
    ## runAsUser: 1000
    ##
    securityContext: {}
    ## Turbinia controller resource requests and limits
    ## @param turbinia.controller.resources.limits Resource limits for the controller container
    ## @param turbinia.controller.resources.requests Requested resources for the controller container
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      ## Example:
      ## requests:
      ##    cpu: 500m
      ##    memory: 1Gi
      requests: {}
    ## @param turbinia.controller.nodeSelector Node labels for Turbinia controller pods assignment
    ## ref: https://kubernetes.io/docs/user-guide/node-selection/
    ##
    nodeSelector: {}
    ## @param turbinia.controller.tolerations Tolerations for Turbinia controller pods assignment
    ## ref https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration/
    ##
    tolerations: []
    ## @param turbinia.controller.affinity Affinity for Turbinia controller pods assignment
    ## ref: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity
    ##
    affinity: {}
  ## Turbinia configuration parameters
  ## ref: https://github.com/google/turbinia/blob/master/turbinia/config/turbinia_config_tmpl.py
  ##
  config:
    ## @param turbinia.config.override Overrides the default Turbinia config to instead use a user specified config. Please ensure
    ## that the config file is either placed in the root of this directory or point the override flag to a path containing
    ## your config file
    ##
    override: turbinia.conf
    ## @param turbinia.config.disabledJobs List of Turbinia Jobs to disable. Overrides DISABLED_JOBS in the Turbinia config.
    disabledJobs: "['BinaryExtractorJob', 'BulkExtractorJob', 'HindsightJob', 'PhotorecJob', 'VolatilityJob']"
  ## GCP configuration parameters
  ## IMPORTANT: Enable GCP when running Turbinia in a GKE cluster
  ##
  gcp:
    ## @param turbinia.gcp.enabled Enables Turbinia to run within a GCP project. When enabling, please ensure you have run the supplemental script `create-gcp-sa.sh` to create a Turbinia GCP service account required for attaching persistent disks.
    ##
    enabled: false
    ## @param turbinia.gcp.projectID GCP Project ID where your cluster is deployed. Required when `.Values.gcp.enabled` is set to `true`
    ##
    projectID: ""
    ## @param turbinia.gcp.projectRegion Region where your cluster is deployed. Required when `.Values.gcp.enabled` is set to `true`
    ##
    projectRegion: ""
    ## @param turbinia.gcp.projectZone Zone where your cluster is deployed. Required when `.Values.gcp.enabled` is set to `true`
    ##
    projectZone: ""
    ## @param turbinia.gcp.serviceAccountName Name of the Turbinia GCP account. Required when '.Values.gcp.enabled' is set to `true`
    ##
    serviceAccountName: "turbinia"
    ## @param turbinia.gcp.gcpLogging Enables GCP Cloud Logging
    ## ref https://cloud.google.com/logging
    ##
    gcpLogging: false
    ## @param turbinia.gcp.gcpErrorReporting Enables GCP Cloud Error Reporting
    ## ref https://cloud.google.com/error-reporting/docs/grouping-errors
    ##
    gcpErrorReporting: false
  ## Turbinia ingress parameters
  ##
  ingress:
    ## @param turbinia.ingress.enabled Enable the Turbinia loadbalancer for external access
    ##
    enabled: false
    ## @param turbinia.ingress.host The domain name Turbinia will be hosted under
    ## Please ensure this value is set when enabling Ingress. If using "gce" for
    ## ingress.className, please ensure you have a DNS record set for the IP address
    ## registered under ingress.gcp.staticIPName
    ##
    host: ""
    ## @param turbinia.ingress.className IngressClass that will be be used to implement the Ingress
    ## ref https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/
    ##
    className: "gce"
    ## GCP ingress configuration
    ##
    gcp:
      ## @param turbinia.ingress.gcp.managedCertificates Enabled GCP managed certificates for your domain
      ## ref https://cloud.google.com/load-balancing/docs/ssl-certificates/google-managed-certs
      ##
      managedCertificates: false
      ## @param turbinia.ingress.gcp.staticIPName Name of the static IP address you reserved in GCP
      ## This is required when using "gce" in ingress.className
      ## ref https://cloud.google.com/compute/docs/ip-addresses/reserve-static-external-ip-address
      ##
      staticIPName: ""
      ## @param turbinia.ingress.gcp.staticIPV6Name Name of the static IPV6 address you reserved in GCP. This can be optionally provided to deploy a loadbalancer with an IPV6 address
      ## ref https://cloud.google.com/compute/docs/ip-addresses/reserve-static-external-ip-address
      ##
      staticIPV6Name: ""
  ## Turbinia service parameters
  ##
  service:
    ## @param service.type Turbinia service type
    ##
    type: ClusterIP
    ## @param service.port Turbinia api service port
    ##
    port: &turbiniaSvcPort 8000
  ## Turbinia metrics parameters
  ## IMPORTANT: Turbinia utilizes Prometheus to scrape metrics through annotations
  ## Please ensure the Prometheus server is also installed to the cluster for metrics to scrape properly
  ##
  metrics:
    ## @param metrics.enabled Enables metrics scraping
    ##
    enabled: true
    ## @param metrics.port Port to scrape metrics from
    ##
    port: 9200
  versioncheck:
    ## @param versioncheck.enabled Enable Turbinia runtime version checking
    ##
    enabled: true
## Metrics Parameters
## IMPORTANT: Timesketch utilizes Prometheus to scrape metrics through annotations
## Please ensure the Prometheus server is also installed to the cluster for metrics to scrape properly
##
metrics:
  ## @param timesketch.metrics.enabled Enables metrics scraping
  ##
  enabled: true
  ## @param timesketch.metrics.port Port to scrape metrics from
  ##
  port: 9200
## @section Third Party Configuration
##
## @section Redis configuration parameters
## IMPORTANT: Redis is deployed with Auth enabled by default
## To see a full list of available values, run helm show values charts/redis*
##
redis:
  ## @param redis.enabled enabled Enables the Redis deployment
  ##
  enabled: true
  ## Redis Authentication parameters
  ##
  auth:
    ## @param redis.auth.enabled Enables Redis Authentication. Disabled due to incompatibility with Turbinia
    ##
    enabled: false
  ## @param redis.sentinel.enabled Enables Redis Sentinel on Redis pods
  ## IMPORTANT: This has not been tested for Turbinia so would leave this disabled
  ##
  sentinel:
    enabled: false
  ## Master Redis Service configuration
  ##
  master:
    ## @param redis.master.count Number of Redis master instances to deploy (experimental, requires additional configuration)
    ##
    count: 1
    ## Redis master service parameters
    ##
    service:
      ## @param redis.master.service.type Redis master service type
      ##
      type: ClusterIP
      ## @param redis.master.service.ports.redis Redis master service port
      ##
      ports:
        redis: 6379
    ## Redis master persistence configuration
    ##
    persistence:
      ## @param redis.master.persistence.size Persistent Volume size
      ##
      size: 2Gi
    ## Redis master resource requests and limits
    ## @param redis.master.resources.limits Resource limits for the Redis master containers
    ## @param redis.master.resources.requests Requested resources for the Redis master containers
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      ## Example:
      ## requests:
      ##    cpu: 500m
      ##    memory: 1Gi
      requests: {}
  ## Redis replicas configuration parameters
  ##
  replica:
    ## @param redis.replica.replicaCount Number of Redis replicas to deploy
    ##
    replicaCount: 0
    ## Redis replicas service parameters
    ##
    service:
      ## @param redis.replica.service.type Redis replicas service type
      ##
      type: ClusterIP
      ## @param redis.replica.service.ports.redis Redis replicas service port
      ##
      ports:
        redis: 6379
    ## Redis replicas persistence configuration
    ##
    persistence:
      ## @param redis.replica.persistence.size Persistent Volume size
      ##
      size: 2Gi
    ## Redis Replica resource requests and limits
    ## @param redis.replica.resources.limits Resources limits for the Redis replica containers
    ## @param redis.replica.resources.requests Requested resources for the Redis replica containers
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      ## Example:
      ## requests:
      ##    cpu: 500m
      ##    memory: 1Gi
      requests: {}
## @section Postgresql Configuration Parameters
## IMPORTANT: Postgresql is deployed with Auth enabled by default
## To see a full list of available values, run helm show values charts/postgresql*
##
postgresql:
  ## @param postgresql.enabled Enables the Postgresql deployment
  ##
  enabled: true
  ## @param postgresql.architecture PostgreSQL architecture (`standalone` or `replication`)
  ##
  architecture: standalone
  ## PostgreSQL Authentication parameters
  ##
  auth:
    ## @param postgresql.auth.username Name for a custom PostgreSQL user to create
    ##
    username: "postgres"
    ## @param postgresql.auth.database Name for a custom PostgreSQL database to create (overrides `auth.database`)
    ##
    database: "timesketch"
  ## PostgreSQL Primary configuration parameters
  ##
  primary:
    ## PostgreSQL Primary service configuration parameters
    ##
    service:
      ## @param postgresql.primary.service.type PostgreSQL primary service type
      ##
      type: ClusterIP
      ## @param postgresql.primary.service.ports.postgresql PostgreSQL primary service port
      ##
      ports:
        postgresql: 5432
    ## PostgreSQL Primary persistence configuration
    ##
    persistence:
      ## @param postgresql.primary.persistence.size PostgreSQL Persistent Volume size
      ##
      size: 2Gi
    ## PostgreSQL primary resource requests and limits
    ## @param postgresql.primary.resources.limits The resources limits for the PostgreSQL primary containers
    ## @param postgresql.primary.resources.requests The requested resources for the PostgreSQL primary containers
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      ## Example:
      ## requests:
      ##    cpu: 500m
      ##    memory: 1Gi
      requests:
        cpu: 250m
        memory: 256Mi
  ## PostgreSQL read only replica parameters (only used when `architecture` is set to `replication`)
  ##
  readReplicas:
    ## @param postgresql.readReplicas.replicaCount Number of PostgreSQL read only replicas
    ##
    replicaCount: 0
    ## PostgreSQL read only service configuration
    ##
    service:
      ## @param postgresql.readReplicas.service.type PostgreSQL read replicas service type
      ##
      type: ClusterIP
      ## @param postgresql.readReplicas.service.ports.postgresql PostgreSQL read replicas service port
      ##
      ports:
        postgresql: 5432
    persistence:
      ## @param postgresql.readReplicas.persistence.size PostgreSQL Persistent Volume size
      ##
      size: 2Gi
    ## PostgreSQL read only resource requests and limits
    ## @param postgresql.readReplicas.resources.limits The resources limits for the PostgreSQL read only containers
    ## @param postgresql.readReplicas.resources.requests The requested resources for the PostgreSQL read only containers
    resources:
      ## Example:
      ## limits:
      ##    cpu: 500m
      ##    memory: 1Gi
      limits: {}
      ## Example:
      ## requests:
      ##    cpu: 500m
      ##    memory: 1Gi
      requests: {}
## @section Opensearch Configuration Parameters
## IMPORTANT: The Opensearch Security Plugin / TLS has not yet been configured by default
## ref on steps required https://opensearch.org/docs/1.1/security-plugin/configuration/index/
## To see a full list of available values, run helm show values charts/opensearch*
##
opensearch:
  ## @param opensearch.enabled Enables the Opensearch deployment
  ##
  enabled: true
  ## @param opensearch.config.opensearch.yml Opensearch configuration file. Can be appended for additional configuration options
  ## Values must be YAML literal style scalar / YAML multiline string
  ## <filename>: |
  ##   <formatted-value(s)>
  ##
  config:
    opensearch.yml: |
      plugins:
        security:
          allow_unsafe_democertificates: false
  ## IMPORTANT: Removing the environment variables below will cause the deployment to fail without
  ## additional configuration
  ##
  extraEnvs:
    ## @param opensearch.extraEnvs[0].name Environment variable to disable Opensearch Demo config
    ##
    - name: DISABLE_INSTALL_DEMO_CONFIG
    ## @param opensearch.extraEnvs[0].value Disables Opensearch Demo config
    ##
      value: "true"
    ## @param opensearch.extraEnvs[1].name Environment variable to disable Opensearch Security plugin given that
    ## certificates were not setup as part of this deployment
    ##
    - name: DISABLE_SECURITY_PLUGIN
    ## @param opensearch.extraEnvs[1].value Disables Opensearch Security plugin
    ##
      value: "true"
  ## @param opensearch.replicas Number of Opensearch instances to deploy
  ##
  replicas: 1
  ## @param opensearch.sysctlInit.enabled Sets optimal sysctl's through privileged initContainer
  ##
  sysctlInit:
    enabled: true
  ## @param opensearch.opensearchJavaOpts Sets the size of the Opensearch Java heap
  ## It is recommended to use at least half the system's available ram
  ##
  opensearchJavaOpts: "-Xmx512M -Xms512M"
  ## @param opensearch.httpPort Opensearch service port
  ##
  httpPort: 9200
  ## Opensearch persistence configuration
  ##
  persistence:
    ## @param opensearch.persistence.size Opensearch Persistent Volume size. A persistent volume would be created for each Opensearch replica running
    ##
    size: 2Gi
  ## Opensearch resource requests
  ## @param opensearch.resources.requests Requested resources for the Opensearch containers
  ##
  resources:
    ## Example:
    ## requests:
    ##    cpu: 500m
    ##    memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi
  ## @param opensearch.nodeSelector Node labels for Opensearch pods assignment
  ## ref: https://kubernetes.io/docs/user-guide/node-selection/
  ##
  nodeSelector: {}
## @section Oauth2 Proxy configuration parameters
## To see a full list of available values, run helm show values charts/oauth2-proxy*
##
oauth2proxy:
  ## @param oauth2proxy.enabled Enables the Oauth2 Proxy deployment
  ##
  enabled: false
  ## @param oauth2proxy.containerPort Oauth2 Proxy container port
  ##
  containerPort: 4180
  ## OAuth2 Proxy service parameters
  ##
  service:
    ## @param oauth2proxy.service.type OAuth2 Proxy service type
    ##
    type: ClusterIP
    ## @param oauth2proxy.service.port OAuth2 Proxy service HTTP port
    ##
    port: 8080
    ## @param oauth2proxy.service.annotations Additional custom annotations for OAuth2 Proxy service
    ## For GCP deployments, remove `{}` and uncomment annotations below.
    ##
    annotations: {}
    #  cloud.google.com/neg: '{"ingress": true}'
    #  cloud.google.com/backend-config: '{"ports": { "{{ .Values.containerPort }}": "{{ .Release.Name }}-backend-config"}}'
  ## Configuration section
  ##
  configuration:
    ## @param oauth2proxy.configuration.turbiniaSvcPort Turbinia service port referenced from `.Values.service.port` to be used in Oauth setup
    ##
    turbiniaSvcPort: *turbiniaSvcPort
    ## @param oauth2proxy.configuration.clientID OAuth client ID for Turbinia Web UI.
    ##
    clientID: ""
    ## @param oauth2proxy.configuration.clientSecret OAuth client secret for Turbinia Web UI.
    ##
    clientSecret: ""
    ## @param oauth2proxy.configuration.nativeClientID Native Oauth client ID for Turbinia CLI.
    ##
    nativeClientID: ""
    ## @param oauth2proxy.configuration.cookieSecret OAuth cookie secret (e.g.  openssl rand -base64 32)
    ##
    cookieSecret: ""
    ## Custom configuration file: oauth2_proxy.cfg
    ## content: |
    ##   pass_basic_auth = false
    ##   pass_access_token = true
    ##
    ## @param oauth2proxy.configuration.content [string] Oauth2 proxy configuration. Please see the [official docs](https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/overview) for a list of configurable values
    ##
    content: |
      provider="oidc"
      oidc_jwks_url="https://accounts.google.com/.well-known/openid-configuration"
      scope="https://www.googleapis.com/auth/userinfo.email"
      skip_jwt_bearer_tokens=true
      force_code_challenge_method='S256'
      logging_filename = "/tmp/oauth2proxy.log"
      standard_logging = true
      request_logging = true
      auth_logging = true
      show_debug_on_error=true
      upstreams=["http://{{ .Release.Name }}-turbinia:{{ .Values.configuration.turbiniaSvcPort }}"]
      oidc_extra_audiences= {{ default "[]" (printf "['%s']" .Values.configuration.nativeClientID) }}
    ## Authorize individual email addresses
    ## @param oauth2proxy.configuration.authenticatedEmailsFile.enabled Enable authenticated emails file
    ## @param oauth2proxy.configuration.authenticatedEmailsFile.content Restricted access list (one email per line). At least one email address is required for the Oauth2 Proxy to properly work
    ## @param oauth2proxy.configuration.authenticatedEmailsFile.existingSecret Secret with the authenticated emails file
    ##
    authenticatedEmailsFile:
      enabled: true
      ## One email per line
      ## e.g:
      ## content: |-
      ##   name1@domain
      ##   name2@domain
      ## If you override the config with restricted_access it will configure a user list within this chart what takes care of the configmap
      ##
      content: ""
      existingSecret: ""
    ## @param oauth2proxy.configuration.oidcIssuerUrl OpenID Connect issuer URL
    ##
    oidcIssuerUrl: "https://accounts.google.com"
    ## @param oauth2proxy.configuration.redirectUrl OAuth Redirect URL
    ##
    redirectUrl: ""
  ## Oauth2 Proxy Redis Subchart
  ##
  redis:
    ## @param oauth2proxy.redis.enabled Enable Redis for OAuth Session Storage
    ##
    enabled: false